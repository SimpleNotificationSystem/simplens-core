# API SERVER ENV
NS_API_KEY=                        #generate an api key via the command `openssl rand -base64 32`
PORT=                              #port for running the api service (e.g., 3000)
MAX_BATCH_REQ_LIMIT=               #limit for maximum batch request (every channel-recipient mapping counts. Eg: 1 recipient with 2 channel counts as 2 reqs) (e.g., 100)               
MONGO_URI=                         #use mongo db connection string, either local or cloud (avoid this incase you use docker-compose)
 
#KAFKA ENV
BROKERS=                           #kafka brokers list (Eg: BROKERS=localhost:9092,localhost:9093...) (avoid this incase you use docker-compose)

#BACKGORUND WORKER ENV
WORKER_ID=                        # Unique ID for the worker (optional, the backend generates unique id for each worker you run)
OUTBOX_POLL_INTERVAL_MS=5000      # Poll every x ms
OUTBOX_CLEANUP_INTERVAL_MS=60000  # Cleanup every X ms
OUTBOX_BATCH_SIZE=100             # Process X entries per poll
OUTBOX_RETENTION_MS=300000        # Keep published entries for X ms
OUTBOX_CLAIM_TIMEOUT_MS=30000     # Claim timeout: if a worker claims an event but crashes, another worker can reclaim after this time

#EMAIL CONFIGURATION
EMAIL_HOST=                        # SMTP host (e.g., smtp.gmail.com)
EMAIL_PORT=                        # SMTP port (465 for SSL, 587 for TLS)
EMAIL_USER=                        # SMTP username/email
EMAIL_PASS=                        # SMTP password or app-specific password
EMAIL_FROM=                        # Sender email address (defaults to EMAIL_USER if not set)

#REDIS CONFIGURATION
REDIS_URL=                         # Redis connection URL (e.g., redis://localhost:6379) (avoid incase you use docker-compose)

#RATE LIMITING (Token Bucket Algorithm)
EMAIL_RATE_LIMIT_TOKENS=           # Max tokens in bucket for email (e.g., 100)
EMAIL_RATE_LIMIT_REFILL_RATE=      # Tokens added per second for email (e.g., 10)
WHATSAPP_RATE_LIMIT_TOKENS=        # Max tokens in bucket for WhatsApp (e.g., 50)
WHATSAPP_RATE_LIMIT_REFILL_RATE=   # Tokens added per second for WhatsApp (e.g., 5)

#IDEMPOTENCY AND RETRY
IDEMPOTENCY_TTL_SECONDS=           # How long to keep idempotency keys in Redis (e.g., 86400 for 24h)
MAX_RETRY_COUNT=                   # Max retries before marking as failed (e.g., 5)
PROCESSING_TTL_SECONDS=            # How long processing lock is held (e.g., 120 for 2 minutes)

#DELAYED WORKER
DELAYED_POLL_INTERVAL_MS=          # Poll Redis for due events every X ms (e.g., 1000 for 1 second)
DELAYED_BATCH_SIZE=                # Fetch X due events per poll (e.g., 10)
MAX_POLLER_RETRIES=                # Max retries for poller before sending to DLQ (e.g., 3)

#LOGGING - GRAFANA AND LOKI
LOKI_URL=                          # url of loki service
LOG_LEVEL=info                     # can be (info, warn, debug, error)
LOG_TO_FILE=true

#ADMIN DASHBOARD
AUTH_SECRET=                      #generate an key via the command `openssl rand -base64 32`
ADMIN_USERNAME=                   #username for admin dashboard
ADMIN_PASSWORD=                   #password for admin dashboard
API_BASE_URL=                     #notification service base url
WEBHOOK_HOST=                     #webhook host
WEBHOOK_PORT=                     #webhook port