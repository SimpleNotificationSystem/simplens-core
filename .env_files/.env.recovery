# ============================================
# Recovery Service Environment Variables
# ============================================
# Detects stuck notifications and creates alerts for manual inspection.
# Also cleans up resolved alerts and processed status outbox entries.

# Node Environment
NODE_ENV=production

# MongoDB Connection
MONGO_URI=mongodb://mongo:27017/notification_service?replicaSet=rs0

# Redis Connection (for checking idempotency status)
REDIS_URL=redis://redis:6379

# Recovery Configuration
RECOVERY_POLL_INTERVAL_MS=60000       # Run recovery every 60 seconds
PROCESSING_STUCK_THRESHOLD_MS=300000  # Consider "processing" stuck after 5 minutes
PENDING_STUCK_THRESHOLD_MS=300000     # Consider "pending" orphaned after 5 minutes
RECOVERY_BATCH_SIZE=50                # Process 50 stuck notifications per run
MAX_RETRY_COUNT=5                     # Max retries for notifications

# Cleanup Configuration (removes old resolved/processed entries)
CLEANUP_RESOLVED_ALERTS_RETENTION_MS=86400000              # Keep resolved alerts for 24 hours
CLEANUP_PROCESSED_STATUS_OUTBOX_RETENTION_MS=86400000      # Keep processed outbox entries for 24 hours

# Logging
LOKI_URL=http://loki:3100
LOG_LEVEL=info
